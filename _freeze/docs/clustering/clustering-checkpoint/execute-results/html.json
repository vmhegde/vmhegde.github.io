{
  "hash": "927f52dad0a6344eacf6aa8a29681efa",
  "result": {
    "markdown": "---\ntitle: Clustering - Finding Clusters in Earthquake data\n---\n\n-   Dataset - Depth vs Magnitude of earthquakes that have occurred\n-   Plot original data on a scatterplot\n-   Use KMeans for clustering - 3 clusters\n-   Plot clusters and cluster centers\n\n::: {.cell tags='[]' execution_count=1}\n``` {.python .cell-code}\nimport sys\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nassert sys.version_info >= (3, 7)\n```\n:::\n\n\n::: {.cell tags='[]' execution_count=2}\n``` {.python .cell-code}\nfrom packaging import version\nimport sklearn\n\nassert version.parse(sklearn.__version__) >= version.parse(\"1.0.1\")\n```\n:::\n\n\nFirst we will read the earthquake data. The goal is to find clusters correlating earthquake depth to earthquake magnitude.\n\n::: {.cell tags='[]' execution_count=3}\n``` {.python .cell-code}\ndf = pd.read_csv(\"./earthquake_data-checkpoint.csv\")\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\n```\n:::\n\n\n## Plot the original data on a scatterplot\n\n::: {.cell tags='[]' execution_count=4}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\n\nplt.rc('font', size=14)\nplt.rc('axes', labelsize=14, titlesize=14)\nplt.rc('legend', fontsize=14)\nplt.rc('xtick', labelsize=10)\nplt.rc('ytick', labelsize=10)\nplt.figure(figsize=(10, 4))\n\nX = df['depth'][0:200]\ny = df['magnitude'][0:200]\nplt.scatter(X, y, marker='*')\nplt.xlabel(\"$depth$\")\nplt.ylabel(\"$magnitude$\", rotation=90)\n#plt.axis([90, 160, 60, 75])\nplt.grid()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-5-output-1.png){width=837 height=363}\n:::\n:::\n\n\nNow we will run the KMeans algorithm to yield 2 clusters. The algorithm will run 10 times. We are running the algorithm on the first 500 data points in the set.\n\n### Clustering Based on Magnitude and Depth\n\nBy applying KMeans clustering to the magnitude and depth of earthquakes, we can identify distinct categories of earthquakes. These categories might reveal patterns such as typical depth ranges for different magnitudes and help in understanding the nature of seismic activities.\n\n### Interpreting Cluster Results\n\nThe results from clustering will provide insights into the distribution and characteristics of earthquake events. For instance, clusters might indicate areas prone to high-magnitude earthquakes or regions with frequent but shallow seismic activities. This analysis is essential for disaster preparedness and mitigation strategies.\n\n::: {.cell tags='[]' execution_count=5}\n``` {.python .cell-code}\nfrom sklearn.cluster import KMeans\nimport numpy as np\n\nk_means = KMeans(init=\"k-means++\", n_clusters=2, n_init=10)\n#X = [df['depth'][0:200], df['magnitude'][0:200]]\nX = []\nfor i in range(500):\n    X.append([df['depth'][i], df['magnitude'][i]])\nk_means.fit(X)\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\nKMeans(n_clusters=2)\n```\n:::\n:::\n\n\nAfter running the algorithm, we can obtain the cluster centers that were found.\n\n::: {.cell tags='[]' execution_count=6}\n``` {.python .cell-code}\nfrom sklearn.metrics.pairwise import pairwise_distances_argmin\n\nk_means_cluster_centers = k_means.cluster_centers_\nk_means_labels = pairwise_distances_argmin(X, k_means_cluster_centers)\n```\n:::\n\n\n## KMeans Clustering Results\n\nIn each iteration of the KMeans algorithm, the centroids of the clusters are adjusted to minimize the variance within each cluster. The following plots show how the cluster centroids and the assignment of points to clusters change with each iteration.\n\n### Initial Iteration\n\nIn the initial iteration, the centroids are randomly placed. The points are assigned to the nearest centroid, forming the initial clusters.\n\n### Subsequent Iterations\n\nIn each subsequent iteration, the centroids are recalculated as the mean of the points in each cluster. The points are then reassigned to the closest new centroid. This process continues until the centroids stabilize and no longer change significantly.\n\n### Final Clusters\n\nAfter a number of iterations, the centroids converge to a position where they best represent the centers of the clusters. The final plot shows the stable clusters where each point is grouped with similar points, minimizing the variance within each cluster.\n\n::: {.cell tags='[]' execution_count=7}\n``` {.python .cell-code}\nfrom sklearn.cluster import KMeans\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nX = np.array(X)\n\n# Number of clusters\nnum_clusters = 3  # Example number of clusters\n\n# Create KMeans instance\nkmeans = KMeans(n_clusters=num_clusters, random_state=42)\n\n# Number of iterations for demonstration\nnum_iterations = 5\n\n# Plotting the clusters for each iteration\nfor i in range(num_iterations):\n    # Run KMeans for a number of iterations\n    kmeans.n_init = i + 1\n    kmeans.fit(X)\n    \n    # Plotting the data and centroids\n    plt.figure(figsize=(8, 6))\n    plt.scatter(X[:, 0], X[:, 1], c=kmeans.labels_, cmap='viridis')\n    plt.scatter(kmeans.cluster_centers_[:, 0], kmeans.cluster_centers_[:, 1], s=300, c='red', label='Centroids')\n    plt.title(f'Clusters after {i + 1} iterations')\n    plt.xlabel('Depth (km)')\n    plt.ylabel('Magnitude')\n    plt.legend()\n    plt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-8-output-1.png){width=678 height=531}\n:::\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-8-output-2.png){width=678 height=531}\n:::\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-8-output-3.png){width=678 height=531}\n:::\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-8-output-4.png){width=678 height=531}\n:::\n\n::: {.cell-output .cell-output-display}\n![](clustering-checkpoint_files/figure-html/cell-8-output-5.png){width=678 height=531}\n:::\n:::\n\n\n## Interpretation\n\nThe final clusters show three distinct groups of earthquakes. There is a noticeable cluster of earthquakes with a smaller depth range but higher magnitudes, possibly indicating a pattern of seismic activity that could be of interest for further investigation.\n\n",
    "supporting": [
      "clustering-checkpoint_files"
    ],
    "filters": [],
    "includes": {}
  }
}